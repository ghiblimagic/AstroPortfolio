---
import Layout from '@/layouts/Layout.astro';
import '@/styles/globals.css'
import '@/styles/normalize.css'
import { getCollection } from 'astro:content';
import SpaceForDesktopSidebar from "@/components/SpaceForDesktopSidebar"

const posts = await getCollection('blog');
const sorted = posts
  .filter(p => !p.data.draft)
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<Layout title="Janet Spellman's Blog.">

  <main class="min-h-screen h-full flex">
    	<SpaceForDesktopSidebar client:load/>
        	<div >
 
                <!-- ********************* HEADER ********************* -->

        <div class=" rounded-2xl mx-auto  " >
    <h1 class=" text-6xl text-mainColor font-bold  text-center font-Rogue py-3">Blog</h1>
        </div>

<!-- ********************* BLOG LIST *********************** -->

    <div class=" pt-10 px-4 sm:px-12 text-center">
    <ul class="space-y-6">
      {sorted.map(post => (
        <li class=" p-4 bg-white rounded-2xl shadow-lg ">
          <a href={`/blog/${post.slug}`} class="text-2xl font-semibold text-purple-950 hover:text-blue-800 group w-full">

            {post.data.title}
       
          <div class="text-white text-base mx-auto bg-mainColor group-hover:bg-blue-800  w-fit py-1 px-4 rounded-2xl my-4">
            {new Date(post.data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          </div>
          {post.data.description && (
            <p class=" mt-2 text-base">{post.data.description}</p>
          )}
             </a>
        </li>
      ))}
    </ul>
    </div>
</div>
  </main>

</Layout>
